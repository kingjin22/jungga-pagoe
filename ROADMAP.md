# 정가파괴 로드맵

## 현재 상태 (2026-02-19 기준)

### ✅ 완료
- FastAPI 백엔드 + Supabase REST API 연동
- Next.js 14 프론트엔드 (무신사 스타일)
- 뽐뿌 RSS 파싱 (원화 가격 있는 딜만)
- 네이버 쇼핑 API로 이미지/상품URL 보강
- 동적 카테고리 필터 (DB 기반)
- APScheduler (30분마다 자동 수집)
- 딜 모달, 추천, 검색, 페이지네이션

### ❌ 현재 버그/한계
| 문제 | 원인 | 심각도 |
|------|------|--------|
| 할인율 0% | 뽐뿌 제목에 % 없음 / 네이버 API hprice 데이터 희박 | 높음 |
| 딜 11개뿐 | RSS에서 원화 가격 있는 것만 필터 | 높음 |
| HOT딜 0개 | 할인율 데이터 없어서 기준 충족 불가 | 중간 |
| 해외딜 제외 | 달러 가격 파싱 의도적 제외 | 낮음 |

---

## 단계별 계획

### Phase 1: 데이터 품질 (지금 바로)
> 할인율 없이는 사이트 가치가 없음. 이걸 먼저 해결해야 함.

**1-1. 뽐뿌 게시글 본문에서 정가 추출**
- 뽐뿌 포스트 본문에 "정가 XX,XXX원" 형태로 원가 기재하는 경우 많음
- 파싱 개선: 제목 + 본문에서 두 가격 비교 → 할인율 계산

**1-2. 네이버 쇼핑 가격 비교 활용**
- 네이버 검색으로 찾은 `lprice` = 현재 최저가
- 뽐뿌 제목 가격 < 네이버 lprice → "네이버보다 X% 저렴" 표시
- 실질적인 할인율 대체 지표

**1-3. 딜 소스 확장**
- 현재: 뽐뿌 RSS 2개 피드
- 추가: 정가거부 네이버 카페 (`cafe.naver.com/wjdrkrjqn`)
- 추가: 클리앙 핫딜 게시판 RSS

---

### Phase 2: 콘텐츠 볼륨 (1주일 내)
> 딜이 11개면 방문자 이탈. 최소 50~100개는 있어야 함.

**2-1. 네이버 쇼핑 직접 수집**
- 이미 구현된 키워드 기반 수집 활성화
- hprice > lprice 조건 → 진짜 할인율 있는 딜만
- 카테고리별 키워드 20개 → 하루 100~200개 수집 가능

**2-2. 쿠팡 파트너스 API** ← 사용자 직접 가입 필요
- `partners.coupang.com` 가입 승인 (1~2일 소요)
- 승인 후 `.env`에 Partners API 키 입력
- 베스트딜/로켓특가 자동 수집 + 제휴 수수료

**2-3. 데이터 유효기간 관리**
- 오래된 딜 자동 만료 (3일 이상 된 딜 expired 처리)
- 가격 검증 서비스 활성화 (현재 구현됨, 스케줄 확인 필요)

---

### Phase 3: UX 개선 (2주일 내)
> 콘텐츠 확보 후 사용성 개선

**3-1. 딜 카드 개선**
- "네이버보다 X% 저렴" 뱃지 (Phase 1-2 결과 활용)
- 딜 등록 시간 표시 ("3시간 전")
- 쇼핑몰 로고/이름 뱃지 (G마켓, 옥션 구분)

**3-2. 커뮤니티 제보 기능**
- 현재 `/submit` 페이지 있음
- URL 붙여넣기 → 자동 가격/이미지 파싱
- 제보 후 관리자 승인 플로우

**3-3. 검색 개선**
- 현재 Supabase ILIKE (단순 부분 일치)
- 개선: 제목 + 카테고리 복합 검색

---

### Phase 4: 배포 (3주일 내)
> 로컬에서만 돌리면 의미 없음

**4-1. 백엔드 배포**
- Railway 또는 Render (무료 티어)
- 환경변수 설정 (Supabase, Naver API)
- 스케줄러 24/7 실행

**4-2. 프론트엔드 배포**
- Vercel (Next.js 최적화, 무료)
- 도메인 연결 (정가파괴.kr 또는 .com)

**4-3. 이미지 영구 저장**
- 현재 로컬 `public/images/deals/`에 저장 → 배포 시 소실
- Supabase Storage 또는 Cloudflare R2로 이전

---

### Phase 5: 수익화 (배포 이후)
- 쿠팡 파트너스 링크 자동 변환 (클릭당 수수료)
- 네이버 쇼핑 파트너스
- 상단 고정 딜 (스폰서드)

---

## 즉시 할 것 (오늘)

1. **Phase 1-2: 네이버 가격 비교** → "네이버보다 저렴" 지표 구현
2. **Phase 2-1: 네이버 쇼핑 직접 수집 활성화** → 딜 볼륨 확보
3. **프론트 타임존 버그 수정** (오늘 등록 0개)
